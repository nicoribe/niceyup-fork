/**
 * Generated by Kubb (https://kubb.dev/).
 * Do not edit manually.
 */

import fetch from '../../../client/fetch'
import type { RequestConfig, ResponseErrorConfig } from '../../../client/fetch'
import type {
  UploadFilesSourceMutationRequest,
  UploadFilesSourceMutationResponse,
  UploadFilesSourceHeaderParams,
  UploadFilesSource400,
  UploadFilesSource401,
  UploadFilesSource403,
  UploadFilesSource404,
  UploadFilesSource429,
  UploadFilesSource500,
} from '../types/UploadFilesSource'

function getUploadFilesSourceUrl() {
  return `/sources/files` as const
}

/**
 * @description Upload files to source
 * {@link /sources/files}
 */
export async function uploadFilesSource(
  {
    data,
    headers,
  }: {
    data: UploadFilesSourceMutationRequest
    headers: UploadFilesSourceHeaderParams
  },
  config: Partial<RequestConfig<UploadFilesSourceMutationRequest>> & {
    client?: typeof fetch
  } = {},
) {
  const { client: request = fetch, ...requestConfig } = config

  const requestData = data
  const formData = new FormData()
  if (requestData) {
    Object.keys(requestData).forEach((key) => {
      const value = requestData[key as keyof typeof requestData]
      if (typeof value === 'string' || (value as unknown) instanceof Blob) {
        formData.append(key, value as unknown as string | Blob)
      }
    })
  }
  const res = await request<
    UploadFilesSourceMutationResponse,
    ResponseErrorConfig<
      | UploadFilesSource400
      | UploadFilesSource401
      | UploadFilesSource403
      | UploadFilesSource404
      | UploadFilesSource429
      | UploadFilesSource500
    >,
    UploadFilesSourceMutationRequest
  >({
    method: 'POST',
    url: getUploadFilesSourceUrl().toString(),
    data: formData,
    ...requestConfig,
    headers: {
      'Content-Type': 'multipart/form-data',
      ...headers,
      ...requestConfig.headers,
    },
  })
  return res
}
