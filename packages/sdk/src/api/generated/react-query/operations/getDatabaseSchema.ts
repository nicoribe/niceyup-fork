/**
 * Generated by Kubb (https://kubb.dev/).
 * Do not edit manually.
 */

import fetch from '../../../../client/fetch-react-query'
import type {
  RequestConfig,
  ResponseErrorConfig,
} from '../../../../client/fetch-react-query'
import type {
  GetDatabaseSchemaQueryResponse,
  GetDatabaseSchemaPathParams,
  GetDatabaseSchemaQueryParams,
  GetDatabaseSchema400,
  GetDatabaseSchema401,
  GetDatabaseSchema403,
  GetDatabaseSchema404,
  GetDatabaseSchema429,
  GetDatabaseSchema500,
} from '../../types/GetDatabaseSchema'

function getGetDatabaseSchemaUrl({
  sourceId,
}: { sourceId: GetDatabaseSchemaPathParams['sourceId'] }) {
  return `/sources/${sourceId}/database/schema` as const
}

/**
 * @description Get database schema
 * {@link /sources/:sourceId/database/schema}
 */
export async function getDatabaseSchema(
  {
    sourceId,
    params,
  }: {
    sourceId: GetDatabaseSchemaPathParams['sourceId']
    params?: GetDatabaseSchemaQueryParams
  },
  config: Partial<RequestConfig> & { client?: typeof fetch } = {},
) {
  const { client: request = fetch, ...requestConfig } = config

  const res = await request<
    GetDatabaseSchemaQueryResponse,
    ResponseErrorConfig<
      | GetDatabaseSchema400
      | GetDatabaseSchema401
      | GetDatabaseSchema403
      | GetDatabaseSchema404
      | GetDatabaseSchema429
      | GetDatabaseSchema500
    >,
    unknown
  >({
    method: 'GET',
    url: getGetDatabaseSchemaUrl({ sourceId }).toString(),
    params,
    ...requestConfig,
  })
  return res.data
}
