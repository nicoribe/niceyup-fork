/**
 * Generated by Kubb (https://kubb.dev/).
 * Do not edit manually.
 */

import fetch from '../../../../client/fetch-react-query'
import type {
  RequestConfig,
  ResponseErrorConfig,
} from '../../../../client/fetch-react-query'
import type {
  UploadFilesConversationMutationRequest,
  UploadFilesConversationMutationResponse,
  UploadFilesConversationHeaderParams,
  UploadFilesConversation400,
  UploadFilesConversation401,
  UploadFilesConversation403,
  UploadFilesConversation404,
  UploadFilesConversation429,
  UploadFilesConversation500,
} from '../../types/UploadFilesConversation'

function getUploadFilesConversationUrl() {
  return `/conversations/files` as const
}

/**
 * @description Upload files for conversation
 * {@link /conversations/files}
 */
export async function uploadFilesConversation(
  {
    data,
    headers,
  }: {
    data: UploadFilesConversationMutationRequest
    headers: UploadFilesConversationHeaderParams
  },
  config: Partial<RequestConfig<UploadFilesConversationMutationRequest>> & {
    client?: typeof fetch
  } = {},
) {
  const { client: request = fetch, ...requestConfig } = config

  const requestData = data
  const formData = new FormData()
  if (requestData) {
    Object.keys(requestData).forEach((key) => {
      const value = requestData[key as keyof typeof requestData]
      if (typeof value === 'string' || (value as unknown) instanceof Blob) {
        formData.append(key, value as unknown as string | Blob)
      }
    })
  }
  const res = await request<
    UploadFilesConversationMutationResponse,
    ResponseErrorConfig<
      | UploadFilesConversation400
      | UploadFilesConversation401
      | UploadFilesConversation403
      | UploadFilesConversation404
      | UploadFilesConversation429
      | UploadFilesConversation500
    >,
    UploadFilesConversationMutationRequest
  >({
    method: 'POST',
    url: getUploadFilesConversationUrl().toString(),
    data: formData,
    ...requestConfig,
    headers: {
      'Content-Type': 'multipart/form-data',
      ...headers,
      ...requestConfig.headers,
    },
  })
  return res.data
}
