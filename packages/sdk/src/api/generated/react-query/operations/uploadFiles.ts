/**
 * Generated by Kubb (https://kubb.dev/).
 * Do not edit manually.
 */

import fetch from '../../../../client/fetch-react-query'
import type {
  RequestConfig,
  ResponseErrorConfig,
} from '../../../../client/fetch-react-query'
import type {
  UploadFilesMutationRequest,
  UploadFilesMutationResponse,
  UploadFilesHeaderParams,
  UploadFiles400,
  UploadFiles401,
  UploadFiles403,
  UploadFiles404,
  UploadFiles429,
  UploadFiles500,
} from '../../types/UploadFiles'

function getUploadFilesUrl() {
  return `/files` as const
}

/**
 * @description Upload files
 * {@link /files}
 */
export async function uploadFiles(
  {
    data,
    headers,
  }: { data: UploadFilesMutationRequest; headers: UploadFilesHeaderParams },
  config: Partial<RequestConfig<UploadFilesMutationRequest>> & {
    client?: typeof fetch
  } = {},
) {
  const { client: request = fetch, ...requestConfig } = config

  const requestData = data
  const formData = new FormData()
  if (requestData) {
    Object.keys(requestData).forEach((key) => {
      const value = requestData[key as keyof typeof requestData]
      if (typeof value === 'string' || (value as unknown) instanceof Blob) {
        formData.append(key, value as unknown as string | Blob)
      }
    })
  }
  const res = await request<
    UploadFilesMutationResponse,
    ResponseErrorConfig<
      | UploadFiles400
      | UploadFiles401
      | UploadFiles403
      | UploadFiles404
      | UploadFiles429
      | UploadFiles500
    >,
    UploadFilesMutationRequest
  >({
    method: 'POST',
    url: getUploadFilesUrl().toString(),
    data: formData,
    ...requestConfig,
    headers: {
      'Content-Type': 'multipart/form-data',
      ...headers,
      ...requestConfig.headers,
    },
  })
  return res.data
}
